---
title: timezone问题
date: 2021-11-26 14:33:12
tags: java
---


### jdbc timezone
```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
stmt.setTimestamp(11, tsSchedStartTime, cal);
```
jdbc如果timestamp要设置时区需要设置第三个参数，相应的jpa hibernate应该也是需要相关的设置，具体需要测试才知道

### ZonedDateTime  jdbc有没有支持

### does System.currentTimeMillis() return UTC time?
It give the number of milliseconds since the unix epoch, which is a fixed point in time, not affected by your local time zone.
https://stackoverflow.com/questions/17271039/does-system-currenttimemillis-return-utc-time

### offsetdatetime vs zoneddatetime
https://www.baeldung.com/java-zoneddatetime-offsetdatetime


### Java 8 Date and Time classes in postgres
https://jdbc.postgresql.org/documentation/head/8-date-time.html


### oracle timezone
https://www.oracletutorial.com/oracle-basics/oracle-timestamp-with-time-zone/
```
CREATE TABLE logs
  (
    log_id      NUMBER GENERATED BY DEFAULT AS IDENTITY,
    log_message VARCHAR2(255) NOT NULL,
    created_at  TIMESTAMP WITH TIME ZONE NOT NULL,  
    PRIMARY KEY(log_id)
  );
```

### jdbc/hibernate/jpa support?


### 浏览器时区
```
const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
console.log(tz); // Asia/Shanghai
```

### 总结
currentTimeMillis得到的是没有时区问题的，到时候用的时候去转换到需要的时区
Returns:
the difference, measured in milliseconds, between the current time and midnight, January 1, 1970 UTC.
