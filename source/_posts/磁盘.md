---
title: 磁盘
date: 2019-07-26 20:44:15
tags: hardware
---

物理接口
M.2 , U.2 , AIC, NGFF 这些属于物理接口。
高速信号协议
SAS，SATA，PCIe 这三个是同一个层面上的，模拟串行高速接口。
传输层协议
SCSI，ATA，NVMe 都属于这一层。主要是定义命令集，数字逻辑层。
NVMe，AHCI和IDE是传输协议（语言）。 它们运行在诸如PCIe或SATA（口头，书写）之类的传输接口之上。
现在市面上 SSD接入PC 的主要接口 是 SATA。其采用命令协议AHCI（它还支持IDE）是为寻道旋转磁盘设计的, 而不是闪存。 SATA三代 传输速率 每秒在150 MB ~ 600 MB 之间。对于SSD的大多数消费者来说，这绝对是足够的。
PCIe（PCI Express）取代SATA 作为最新的高带宽接口。
NVMe是最新的高性能和优化协议，取代了AHCI，并支持PCIe技术。
RAID 0：如果你有n块磁盘，原来只能同时写一块磁盘，写满了再下一块，做了RAID 0之后，n块可以同时写（并发write），速度提升很快，但由于没有备份，可靠性很差。n最少为2。
RAID 1：正因为RAID 0太不可靠，所以衍生出了RAID 1。如果你有n块磁盘，把其中n/2块磁盘作为镜像磁盘，在往其中一块磁盘写入数据时，也同时往另一块写数据。坏了其中一块时，镜像磁盘自动顶上，可靠性最佳，但空间利用率太低。n最少为2。
RAID0性能最高，RAID1可靠性最高
可以用ssd来做磁盘阵列，如果要性能就RAID0，可靠性就RAID1

参考
https://www.zhihu.com/question/48972075
kafka存储 https://medium.com/@durgaswaroop/a-practical-introduction-to-kafka-storage-internals-d5b544f6925f